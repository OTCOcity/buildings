<header class="header">
  <div class="container">
    <div class="header__row">
      <div class="header__intro">
        <div class="header__title">Доходность по квартирам</div>
        <div class="header__subtitle">Аренда vs ипотека — помесячно</div>
        <a class="header__back-link" href="/">← Вернуться на главную</a>
      </div>

      <div class="kpis" aria-label="Итоги">
        <div class="kpi">
          <div class="kpi__label">Доход</div>
          <div class="kpi__value" id="kpiIncome">{{ MiscFunc.priceFormat(income) }} ₽</div>
        </div>
        <div class="kpi">
          <div class="kpi__label">Расход</div>
          <div class="kpi__value" id="kpiExpense">{{ MiscFunc.priceFormat(expense) }} ₽</div>
        </div>
        <div class="kpi kpi--net">
          <div class="kpi__label">Итог</div>
          <div class="kpi__value" id="kpiNet">{{ MiscFunc.priceFormat(netTotal) }} ₽</div>
          <div class="kpi__hint" id="kpiHint">{{ kpiHint }}</div>
        </div>
      </div>
    </div>
  </div>
</header>

<main class="container">
  <section class="grid" aria-label="Список квартир">
    {% for build in buildings %}
      <article class="card">
        <div class="card__head">
          <div class="card__title">{{ build.name|replace({'Академика': 'Ак.'}) }}</div>
          <div class="badge {{ build.badgeClass }}">{{ build.netBadge }}</div>
        </div>

        <div class="meta">
          <div class="meta__item">
            <div class="meta__label">Этаж</div>
            <div class="meta__value">{{ build.floor ?? '-' }}</div>
          </div>
          <div class="meta__item">
            <div class="meta__label">Площадь</div>
            <div class="meta__value">{{ (build.area ? build.area ~ ' м<sup>2</sup>' : '-') | raw }}</div>
          </div>
        </div>

        <div class="money">
          <div class="money__row">
            <div class="money__label">Аренда</div>
            <div class="money__value">{{ MiscFunc.priceFormat(build.rentCostValue) }} ₽</div>
          </div>
          <div class="money__row">
            <div class="money__label">Ипотека</div>
            <div class="money__value">{{ MiscFunc.priceFormat(build.paymentAmountValue) }} ₽</div>
          </div>
          <div class="divider"></div>
          <div class="money__row money__row--net">
            <div class="money__label">Итог</div>
            <div class="money__net {{ build.netClass }}">{{ MiscFunc.priceFormat(build.netValue) }} ₽</div>
          </div>
        </div>

        <div class="note">
        Стоимость ипотеки: 
        {% if build.mortgage_size and build.mortgage_size > 0 %}
            {{ MiscFunc.priceFormat(build.mortgage_size) }} ₽
        {% else %}
            <не указана>
        {% endif %}
        </div>
      </article>
    {% endfor %}
  </section>

  <footer class="footer">
    <div class="footer__note">
      Всего в наличии <code>{{ buildings|length }}</code> {{ MiscFunc.pluralForm(buildings|length, ['квартира', 'квартиры', 'квартир']) }}, общая прибыль <code>{{ MiscFunc.priceFormat(netTotal) }} ₽</code>.
    </div>
  </footer>
</main>
